@model WebNangCao_MVC_Model.Models.AuthViewModels
@{
    ViewData["Title"] = "Đăng nhập / Đăng ký";
    Layout = null;
}

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - EduTest</title>
    <link rel="stylesheet" href="~/css/auth.css" />
</head>
<body>

    <div class="auth-container">
        <!--Toggle cho Role của User-->
        <div class="role-wrapper">
            <div class="role-dropdown" id="roleDropdown" onclick="toggleRoleList()">
                <div class="role-selected">
                    <div class="role-info">
                        <i data-lucide="user" id="current-role-icon" class="role-icon"></i>
                        <span id="current-role-text">Học viên</span>
                    </div>
                    <i data-lucide="chevron-down" class="role-arrow"></i>
                </div>

                <ul class="role-options" id="roleOptions">
                    <li onclick="selectRole('student', 'Học viên', 'user')">
                        <i data-lucide="user" class="opt-icon"></i>
                        <span>Học viên</span>
                        <i data-lucide="check" class="check-icon" id="check-student"></i>
                    </li>
                    <li onclick="selectRole('instructor', 'Giảng viên', 'briefcase')">
                        <i data-lucide="briefcase" class="opt-icon"></i>
                        <span>Giảng viên</span>
                        <i data-lucide="check" class="check-icon hidden" id="check-instructor"></i>
                    </li>
                </ul>
            </div>
        </div>

        <div class="auth-header">
            <div class="header-icon-box">
                <i data-lucide="graduation-cap" class="big-icon"></i>
            </div>
            <h1>EduTest</h1>
            <p>Hệ thống đánh giá năng lực trực tuyến</p>
        </div>
        <div class="tabs">
            <button type="button" id="btn-tab-login" class="tab-btn @(Model.ActiveTab == "login" ? "active" : "")" onclick="switchTab('login')">
                <i data-lucide="log-in" class="tab-icon"></i> Đăng nhập
            </button>

            <button type="button" id="btn-tab-register" class="tab-btn @(Model.ActiveTab == "register" ? "active" : "")" onclick="switchTab('register')">
                <i data-lucide="user-plus" class="tab-icon"></i> Đăng ký
            </button>
        </div>

        <div id="tab-content-login" class="@(Model.ActiveTab == "login" ? "" : "hidden")">
            <form asp-controller="Account" asp-action="Login" method="post">
                <input type="hidden" name="Role" id="input-role-login" value="student" />
                @if (!ViewData.ModelState.IsValid && Model.ActiveTab == "login")
                {
                    <div class="validation-summary">@Html.ValidationSummary(true)
                        Vi phạm xác thực tài khoản
                    </div>
                }

                <div class="form-group">
                    <label class="form-label">Tài khoản / Email</label>
                    <div class="input-wrapper">
                        <i data-lucide="user" class="input-icon"></i>
                        <input asp-for="Login.UsernameOrEmail" class="form-input" placeholder="Nhập email..." />
                    </div>
                    <span asp-validation-for="Login.UsernameOrEmail" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <label class="form-label">Mật khẩu</label>
                    <div class="input-wrapper">
                        <i data-lucide="lock" class="input-icon"></i>
                        <input asp-for="Login.Password" type="password" class="form-input" placeholder="Nhập mật khẩu..." />
                    </div>
                    <span asp-validation-for="Login.Password" class="text-danger"></span>
                </div>

                <button type="submit" class="btn-submit">Đăng nhập ngay</button>
            </form>
        </div>

        <div id="tab-content-register" class="@(Model.ActiveTab == "register" ? "" : "hidden")">
            <form asp-controller="Account" asp-action="Register" method="post">
                <input type="hidden" asp-for="Register.Role" id="input-role-register" value="student" />
                @if (!ViewData.ModelState.IsValid && Model.ActiveTab == "register")
                {
                    <div class="validation-summary"><span class="text-danger">Vui lòng kiểm tra lại thông tin</span></div>
                }

                <div class="form-group">
                    <label class="form-label">Họ và tên</label>
                    <div class="input-wrapper">
                        <i data-lucide="contact" class="input-icon"></i>
                        <input asp-for="Register.Name" class="form-input" placeholder="Nguyễn Văn A" />
                    </div>
                    <span asp-validation-for="Register.Name" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <label class="form-label">Email</label>
                    <div class="input-wrapper">
                        <i data-lucide="mail" class="input-icon"></i>
                        <input asp-for="Register.Email" class="form-input" placeholder="email@example.com" />
                    </div>
                    <span asp-validation-for="Register.Email" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <label class="form-label">Tên đăng nhập</label>
                    <div class="input-wrapper">
                        <i data-lucide="user" class="input-icon"></i>
                        <input asp-for="Register.Username" class="form-input" />
                    </div>
                    <span asp-validation-for="Register.Username" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <label class="form-label">Mật khẩu</label>
                    <div class="input-wrapper">
                        <i data-lucide="lock" class="input-icon"></i>
                        <input asp-for="Register.Password" type="password" class="form-input" />
                    </div>
                    <span asp-validation-for="Register.Password" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <label class="form-label">Xác nhận mật khẩu</label>
                    <div class="input-wrapper">
                        <i data-lucide="shield-check" class="input-icon"></i>
                        <input asp-for="Register.ConfirmPassword" type="password" class="form-input" />
                    </div>
                    <span asp-validation-for="Register.ConfirmPassword" class="text-danger"></span>
                </div>

                <button type="submit" class="btn-submit">Tạo tài khoản</button>
            </form>
        </div>
    </div>

    <script src="~/js/auth.js"></script>

    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        lucide.createIcons();
    </script>
</body>
</html>